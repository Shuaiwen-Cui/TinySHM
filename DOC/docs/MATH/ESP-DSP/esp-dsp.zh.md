# ESP-DSP 数字信号处理库

<div class="grid cards" markdown>

-   :simple-espressif:{ .lg .middle } __ESP-DSP__

    ---

    一个 Espressif DSP 库 (esp-dsp)，它是一个函数、模块和组件的库，提供了以高效的方式使用 Espressif 的 CPU 作为 DSP 的可能性。

    [:octicons-arrow-right-24: <a href="https://docs.espressif.com/projects/esp-dsp/en/latest/esp32/index.html" target="_blank"> 在线文档 </a>](#)

</div>

## 函数命名

命名约定适用于所有覆盖的领域。您可以通过 dsps 前缀区分信号处理函数，而图像和视频处理函数具有 dspi 前缀，特定于小矩阵操作的函数在其名称中具有 dspm 前缀。库中的函数名称具有以下通用格式：

```txt
dsp<data-domain>_<name>_<datatype1><datatype_ext>_<datatype2><datatype_ext>[_<descriptor>]<_impl>(<parameters>);
```

其中：

-   `<data-domain>` 是函数的域，例如 `s` 表示信号处理，`i` 表示图像处理，`v` 表示视频处理，`m` 表示小矩阵操作。
  
-   `<name>` 是函数的名称。

-   `<datatype1>` 是第一个输入参数的类型。

-   `<datatype_ext>` 是第一个输入参数的类型，后缀表示数据的类型，例如 `f` 表示浮点数，`i` 表示整数，`c` 表示复数等。

-   `<datatype2>` 是第二个输入参数的类型。

-   `<descriptor>` 是一个可选描述符，提供有关函数的附加信息。

-   `<impl>` 是一个可选实现描述符，提供有关函数实现的附加信息。

-   `<parameters>` 是函数的参数。

## 数据域

数据域是一个单字符，表示给定函数所属的功能子集。库设计为支持以下数据域：

- s - 信号（预期数据类型为 1D 信号）

- i - 图像和视频（预期数据类型为 2D 图像）

- m - 矩阵（预期数据类型为矩阵）

- r - 逼真渲染功能和 3D 数据处理（预期数据类型取决于支持的渲染技术）

- q - 固定长度信号

例如，以 dspi 开头的函数名称表示相应的函数用于图像或视频处理。

## 名称

函数名称是函数实际执行的核心操作的缩写，例如 Add、Sqrt，在某些情况下会后跟函数特定的修饰符：= [_modifier]

如果存在此修饰符，则表示对给定函数进行了细微的修改或变体。

## 数据类型

该库支持两种主要数据类型：用于定点运算的 int16 和用于浮点运算的 float。数据类型描述如下：

### 数据类型后缀

- s - 有符号

- u - 无符号

- f - 浮点数

### 数据类型扩展

- c - 复数

### 数据类型比特分辨率

- 16

- 32

例如：dsps_mac_sc16 定义将使用 16 位有符号复数数据对 1d 数组进行 m​​ac 运算。

## 实现方式类型

每个函数可以针对不同的平台进行不同的实现，并且可以使用不同的样式和资源。因此，每个实现的函数都会有一个扩展名 <_impl>，用于定义其实现类型。用户无需扩展名即可使用通用函数。

### 实现方式类型后缀

默认情况下，所有函数无需扩展即可使用。您可以在 menuconfig 中选择“optimized/ansi”选项。

库中的扩展包括：

- _ansi - 通用函数，其函数体使用 ANSI C 实现。此实现不包含任何硬件优化。

- _ae32 - 使用 ESP32 汇编器编写，并针对 ESP32 进行了优化。

- _aes3 - 使用 ESP32S3 汇编器编写，并针对 ESP32S3 进行了优化。

- _arp4 - 使用 ESP32P4 汇编器编写，并针对 ESP32P4 进行了优化。

- _platform - 头文件，其中包含针对不同函数的可用 CPU 指令定义。

- 其他 - 取决于支持的 CPU 数量。此列表未来将不断扩展。